import tkinter as tk
from tkinter import messagebox

# Data storage
items = []

# GUI Functions
def add_item():
    name = entry_name.get()
    price = entry_price.get()
    stock = entry_stock.get()
    
    if name and price and stock:
        items.append({"name": name, "price": float(price), "stock": int(stock)})
        entry_name.delete(0, tk.END)
        entry_price.delete(0, tk.END)
        entry_stock.delete(0, tk.END)
        messagebox.showinfo("Info", "Item added successfully!")
    else:
        messagebox.showwarning("Warning", "Please fill all fields")

def display_items():
    display_text = ""
    for item in items:
        display_text += f"Name: {item['name']}, Price: {item['price']}, Stock: {item['stock']}\n"
    messagebox.showinfo("Items", display_text)

def delete_item():
    name = entry_name.get()
    global items
    items = [item for item in items if item['name'] != name]
    messagebox.showinfo("Info", "Item deleted successfully!")

def search_item():
    name = entry_name.get()
    found_items = [item for item in items if item['name'] == name]
    if found_items:
        item = found_items[0]
        messagebox.showinfo("Found Item", f"Name: {item['name']}, Price: {item['price']}, Stock: {item['stock']}")
    else:
        messagebox.showwarning("Warning", "Item not found")

def calculate_purchase():
    name = entry_name.get()
    quantity = entry_quantity.get()
    
    for item in items:
        if item['name'] == name:
            if item['stock'] >= int(quantity):
                item['stock'] -= int(quantity)
                total_price = int(quantity) * item['price']
                messagebox.showinfo("Total Price", f"Total price: {total_price}")
            else:
                messagebox.showwarning("Warning", "Not enough stock")
            return

# GUI setup
root = tk.Tk()
root.title("Item Management System")

# Entry fields
tk.Label(root, text="Name:").grid(row=0, column=0)
entry_name = tk.Entry(root)
entry_name.grid(row=0, column=1)

tk.Label(root, text="Price:").grid(row=1, column=0)
entry_price = tk.Entry(root)
entry_price.grid(row=1, column=1)

tk.Label(root, text="Stock:").grid(row=2, column=0)
entry_stock = tk.Entry(root)
entry_stock.grid(row=2, column=1)

tk.Label(root, text="Quantity:").grid(row=3, column=0)
entry_quantity = tk.Entry(root)
entry_quantity.grid(row=3, column=1)

# Buttons
tk.Button(root, text="Add Item", command=add_item).grid(row=4, column=0)
tk.Button(root, text="Display Items", command=display_items).grid(row=4, column=1)
tk.Button(root, text="Delete Item", command=delete_item).grid(row=5, column=0)
tk.Button(root, text="Search Item", command=search_item).grid(row=5, column=1)
tk.Button(root, text="Calculate Purchase", command=calculate_purchase).grid(row=6, column=0, columnspan=2)

root.mainloop()
